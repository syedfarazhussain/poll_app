  
{% extends "base.html" %}

{% block title %}Homepage{% endblock %}

{% block main %}
<br>
{% if messages %}
{% for message in messages %}
<div class="alert alert-warning alert-dismissable" role="alert">
    <button class="close" data-dismiss="alert">
        <small><sup>x</sup></small>
    </button>
    {{ message }}
</div>
{% endfor %}
{% endif %}
<br>
<div class="row">
    <div class="col-lg-8 col-lg-offset-2">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">Available Polls</h3>
                
            </div>
                
            <ul class="list-group">
                {% for poll in polls %}
                <li class="list-group-item">
                    <br><p><b> UserName -----> {{ poll.author|default_if_none:"Anonymous User"}} {% if poll.author.is_staff %}<span class="badge badge-dark">Admin</span>{% endif %}</b><br>
                    <span class="badge badge-success">Poll Question:</span>  <strong>{{ poll.question }}</strong>
                    <span class="pull-right">
                        <a href="{% url 'vote' poll.id %}" class="btn btn-info btn-xs">Vote</a> &nbsp;
                        <a href="{% url 'results' poll.id %}" class="btn btn-default btn-xs">View Results</a> &nbsp;
                        {% if request.user == poll.author  %}
                        <a href="{% url 'delete' poll.id %}" class="btn btn-warning">Delete</a> &nbsp;
                        {% endif %}
                        {% if request.user == poll.author %}
                        <a href="{% url 'update_view' poll.id %}" class="btn btn-success">Edit</a> &nbsp;
                        {% endif %}
                    </span>
                </li>
                {% endfor %}
            </ul>

        </div>
    </div>
</div>
{% endblock %}